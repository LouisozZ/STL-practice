# 空间分配器

## 相关类型

### sizt_t 和 size_type

size_t 位于标准类库 std 中，是无符号形的数据类型，用于指明数组长度和下标，设计 std::size_t 是为了适应多个平台，增强在不同平台间的可移植性。

size_type 是在 STL 对象中对 size_t 取得别名，也是一个数据类型（仅仅是别名而已）。可以用来表示容器的大小、下标。

### ptrdiff_t 和 difference_type

ptrdiff_t 位于标准类库 std 中，是有符号形的数据类型，用于表示存放在同一数组中两个元素的距离，距离的单位是单个元素大小，可以为负数。

```c++
vector<int> int_arr = {1,2,3,4,5};
ptrdiff_t distance1 = int_arr[4] - int_arr[0]; // distance1 = 4
vector<char> char_arr = {'a','b','c','d','e'};
ptrdiff_t distance2 = char_arr[4] - char_arr[0]; // distance2 = 4
```

上述代码中，虽然容器内的元素类型不同，所占的字节数不同，但是 ptrdiff_t 类型记录的是元素之间距离多少个元素，所以返回值都是 4 。

difference_type 是在 STL 对象中对 difference_type 取得别名。所以上述的代码可以改写成：

```c++
vector<int> int_arr = {1,2,3,4,5};
vector<int>::size_type index = 0;
cout << int_arr[index];
vector<int>::difference_type distance = int_arr[4] - int_arr[0];
printf("%d",distance);
```

注意，打印 distance 的时候使用的是 %d。

[返回主目录](../../README.md)